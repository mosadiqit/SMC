<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="action_general_pdf_report" model="ir.actions.report">
        <field name="name">General Ledger Report</field>
        <field name="model">general.ledger.wizard</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">general_ledger_report_pdf.report_general_document</field>
    </record>

    <template id="report_general_document">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div class="page">
                    <div class="text-left">
                        <h3 class="text-center">General Ledger </h3>
                        <div class="row mt64">
                            <div class="col-6" >
                                <strong>Account: </strong> <span t-esc="account"/>
                            </div>
                            <div class="col-6">
                                <strong>Print Date: </strong> <span t-esc="print_date"/>
                            </div>
                        </div>
                        <div class="row mt64">
                            <div class="col-6" >
                                <strong>User: </strong> <span t-esc="user.name"/>
                            </div>
<!--                            <div class="col-6">-->
<!--                                <strong>Print Date: </strong> <span t-esc="print_date"/>-->
<!--                            </div>-->
                        </div>
<!--                            <strong>Account: </strong><span t-esc="account"/><br/>-->
                        <p><strong>Date: </strong><span t-esc="date_from" t-options="{'widget': 'date'}"/>  <strong>- </strong><span t-esc="date_to" t-options="{'widget': 'date'}"/></p>
                    </div>
                </div>
                <table class="table table-sm" name="account_lines_table" style="border-bottom:1px solid black;">

                    <tr style="border-bottom:1px solid black;">
                        <td style="border-bottom:1px solid black;"><strong>Date</strong></td>
                        <td style="border-bottom:1px solid black;"><strong>Voucher#</strong></td>
                        <td style="border-bottom:1px solid black;"><strong>Details</strong></td>
                        <td style="border-bottom:1px solid black;" class="text-right"><strong>Debit</strong></td>
                        <td style="border-bottom:1px solid black;" class="text-right"><strong>Credit</strong></td>
                        <td style="border-bottom:1px solid black;" class="text-right"><strong>Balance</strong></td>
                    </tr>
                    <tbody>
                        <tr>
                            <strong> <td style="border-bottom:1px solid black;" colspan="5" class="text-left"><strong>Opening Balance</strong></td></strong>
<!--                            <td style="border-bottom:1px solid black;" class="text-right"><strong><span t-esc="openbal"/></strong></td>-->
                            <td style="border-bottom:1px solid black;" class="text-right"><strong><span t-esc="'{0:,.0f}'.format(int(opening))"/></strong></td>
                        </tr>
                        <t t-set="bal" t-value="0"/>
                        <tr t-foreach="ledgers" t-as="l" style="font-size: 13px;" >
                            <t t-set="bal" t-value="bal+(l.debit - l.credit)"/>
<!--                            <t t-set="total_debit" t-value="total_debit + l.debit"/>-->
<!--                            <t t-set="total_credit" t-value="total_credit + l.credit"/>-->
                            <td style="border-bottom:1px solid black;" class="text-left"><span t-esc="l.date" t-options="{'widget': 'date'}"/></td>
                            <td style="border-bottom:1px solid black;" class="text-left"><span t-esc="l.move_id.name"/></td>
                            <td style="border-bottom:1px solid black;" class="text-left"><span t-esc="l.name"/></td>
                            <td style="border-bottom:1px solid black;" class="text-right"><t t-esc="'{0:,.0f}'.format(int(l.debit))"/></td>
                            <td style="border-bottom:1px solid black;" class="text-right"><t t-esc="'{0:,.0f}'.format(int(l.credit))"/></td>
                            <td style="border-bottom:1px solid black;" class="text-right"><t t-esc="'{0:,.0f}'.format(int(bal))"/></td>
                        </tr>
                        <tr style="border-top:1px solid #000;">
                            <td  style="border-bottom:1px solid black;" colspan="5" class="text-left"><strong>Closing Balance</strong></td>
<!--                            <td  style="border-bottom:1px solid black;" class="text-right"><strong><t t-esc="'{0:,.0f}'.format(int(total_debit))"/></strong></td>-->
<!--                            <td  style="border-bottom:1px solid black;" class="text-right"><strong><t t-esc="'{0:,.0f}'.format(int(total_credit))"/></strong></td>-->
<!--                            <td  style="border-bottom:1px solid black;" class="text-right"><strong><t t-esc="'{0:,.0f}'.format(int(amount_currency))"/></strong></td>-->
                            <td  style="border-bottom:1px solid black;" class="text-right"><strong><t t-esc="'{0:,.0f}'.format(int(closing))"/></strong></td>
                        </tr>
                    </tbody>
                </table>
            </t>
        </t>
    </template>

</odoo>
